<p align="center"><img src="asset/icon.ico" alt="Misbaha logo" width="100" height="100"></p>

## مسبحة – عدّاد تسبيح رقمي

**مسبحة** هو تطبيق سطح مكتب بسيط وجميل لعدّ الأذكار.  
يسمح لك بالاستمرار في عملك المعتاد على الجهاز، ومع ذلك **تزيد العدّاد بضغطة زر الماوس الأوسط فقط** أو باختصار من لوحة المفاتيح.

![زر الماوس الأوسط](asset/middle-mouse-button.jpg)

![لقطة من التطبيق](asset/Misbaha.png)

> **اجعل زر الماوس الأوسط مفيدًا حقًا.**

### المميزات الرئيسية

- **العد عن طريق زر الماوس الأوسط**:  
  اضغط على زر العجلة (الزر الأوسط) في أي مكان، فيزداد العدّ في التطبيق في الخلفية.
- **اختصار لوحة مفاتيح عالمي**:  
  يمكنك اختيار مجموعة مفاتيح (مثلًا: `Ctrl+Space`) بدلاً من زر الماوس.
- **واجهة حديثة وجذابة**:  
  تصميم ببطاقات جميلة باستخدام `customtkinter` مع حركات بسيطة للعدّ والتقدّم.
- **دعم العربية والإنجليزية**:  
  يمكنك التبديل بين اللغة العربية والإنجليزية داخل التطبيق مباشرة.
- **الوضع الليلي والفاتح**:  
  زر واحد للتبديل بين المظهر الداكن أو الفاتح، ويتم حفظ اختيارك.
- **أذكار جاهزة ومخصّصة**:  
  مجموعة من الأذكار الشائعة مع إمكانية إضافة ذكر مخصّص مع الهدف المطلوب.
- **الأهداف والدورات والمجموع الكلي**:  
  يعرض لك التطبيق تقدّمك نحو الهدف وعدد الدورات والمجموع الكلي.
- **حفظ الجلسات**:  
  تستطيع حفظ جلسة الذكر والرجوع إليها لاحقًا أو حذفها متى شئت.
- **الحاوية والإشعارات**:  
  يمكن إخفاء مسبحة في **حاوية النظام (System Tray)**، وستصلك **إشعارات عند اكتمال الدورة** أثناء كونها في الخلفية، ويمكنك الإظهار أو الإنهاء من قائمة الحاوية.

---

## كيف يعمل التطبيق؟

1. شغّل التطبيق.
2. اختر الذكر والهدف (مثل 33 أو 100).
3. تأكّد أن **طريقة الإدخال الحالية هي زر الماوس الأوسط** (أو الاختصار الذي اخترته).
4. اترك نافذة مسبحة مفتوحة، ثم:
   - استمر في استخدام المتصفح أو المحرّر أو أي برنامج آخر.
   - عند كل مرة تريد زيادة العدّ، اضغط على زر الماوس الأوسط.
   - ارجع لنافذة مسبحة لمشاهدة العدّ، عدد الدورات، ومدّة الجلسة.

يستخدم التطبيق مكتبة `pynput` للاستماع للضغطات عالميًا، لذلك لا يلزم أن تكون نافذة مسبحة هي النشطة.

---

## تشغيل التطبيق في بيئة التطوير

- **المتطلبات**
  - Python 3.10 أو أحدث.
  - وجود `pip`.
  - ينصح باستخدام نظام ويندوز (الأيقونات ونغمة الصوت مهيّأة له)، مع أن الأساس يعمل على أنظمة أخرى أيضًا.

- **1. استنساخ المشروع**

```bash
git clone https://github.com/Mostafa-Ben-Git/Misbaha.git
cd Misbaha
```

- **2. إنشاء بيئة افتراضية وتفعيلها (PowerShell على ويندوز)**:

```bash
python -m venv .venv
.venv\Scripts\Activate.ps1
```

- **3. تثبيت الحزم اللازمة**:

```bash
pip install -r requirements.txt
```

- **4. تشغيل التطبيق**:

```bash
python app.py
```

ستظهر نافذة مسبحة، وتبدأ بالاستماع لزر الماوس الأوسط أو الاختصار.

---

## مكان حفظ إعدادات التطبيق

- **ملف الإعدادات**
  - يقوم التطبيق بحفظ آخر حالة لك (الذكر الحالي، العدّ، الدورة، اللغة، المظهر، الجلسات، والاختصار) في ملف JSON:
    - **المسار العام**: `~/.tasbih/tasbih_settings.json`
    - **على ويندوز**: غالبًا `C:\Users\<اسم_المستخدم>\.tasbih\tasbih_settings.json`
- **إعادة ضبط التطبيق**
  - لإرجاع مسبحة إلى الإعدادات الافتراضية:
    - أغلق التطبيق.
    - احذف الملف `tasbih_settings.json` من المجلد المذكور.
    - عند تشغيل التطبيق مرة أخرى سيُنشئ الملف بإعدادات جديدة.

---

## استخدام التطبيق (خطوة بخطوة)

1. شغّل التطبيق (`python app.py` أو تشغيل الملف التنفيذي المبني).
2. اختر **الذكر** من القائمة أو أضف **ذكرًا مخصّصًا** مع الهدف.
3. حدّد **الهدف** (مثل 33، 99، 100، أو رقم مخصّص).
4. اختر طريقة العد:
   - زر **الماوس الأوسط** (الافتراضي)، أو
   - من داخل التطبيق افتح إعدادات الإدخال واختر **اختصار لوحة مفاتيح** مثل `Ctrl+Space`.
5. استمر في استخدام أي برنامج آخر (متصفح، محرّر، مصحف إلكتروني، إلخ) ثم:
   - اضغط زر الماوس الأوسط (أو الاختصار) كلما أردت زيادة العدّ.
   - راقب **العدّ الحالي** و**عدد الدورات** و**شريط التقدّم** داخل مسبحة.
6. يمكن كذلك:
   - التبديل بين **الوضع الليلي والفاتح**.
   - التبديل بين **اللغة العربية والإنجليزية**.
   - **حفظ الجلسات** والعودة إليها لاحقًا من بطاقة الجلسات.
7. سلوك الحاوية (System Tray):
   - عند **تصغير** النافذة يتم إخفاء مسبحة في حاوية النظام بدل بقائها في شريط المهام.
   - عند اكتمال دورة والبرنامج مخفي، سيظهر **إشعار مكتبي** بدلاً من نغمة فقط.
   - يمكنك النقر على أيقونة الحاوية (أو استخدام قائمتها) لـ **إظهار** مسبحة من جديد أو اختيار **خروج** لإغلاقها تمامًا.

---

## إنشاء ملف تنفيذي مستقل (PyInstaller)

التطبيق يدعم PyInstaller من داخل الكود. لإنشاء ملف تنفيذي واحد (`.exe`) على ويندوز:

```bash
python app.py build
```

سيقوم ذلك بـ:

- تثبيت `pyinstaller` تلقائيًا إن لم يكن موجودًا.
- إنشاء ملف تنفيذي باسم **`Misbaha`**.
- تضمين الأيقونة `asset/icon.ico` والصوت `asset/audio.wav` إن وُجدا.

يمكنك بعد ذلك مشاركة الملف التنفيذي مع الآخرين.

---

## المساهمة في المشروع

نرحّب جدًا بمساهمتك في تطوير مسبحة. الخطوات المقترحة:

1. **قم بعمل Fork** للمستودع على GitHub.
2. **استنسخ** المستودع على جهازك، واتّبع خطوات "تشغيل التطبيق في بيئة التطوير".
3. **أنشئ فرعًا جديدًا** للتعديل:

```bash
git checkout -b feature/تحسين-أو-ميزة-جديدة
```

4. نفّذ التعديلات التي ترغب بها (تحسين الواجهة، إضافة أذكار، إصلاح أخطاء…).
5. شغّل التطبيق (`python app.py`) وتأكد يدويًا أن كل شيء يعمل كما تتوقع.
6. **قم بعمل commit** ثم **ادفع الفرع** إلى GitHub:

```bash
git commit -am "وصف موجز للتغيير"
git push origin feature/تحسين-أو-ميزة-جديدة
```

7. افتح **Pull Request** من فرعك إلى الفرع الرئيسي مع توضيح:
   - ما الذي تم تغييره؟
   - لماذا هو مفيد للمشروع؟
   - أي تجارب أو اختبارات قمت بها؟

أفكار لمساهمات بسيطة:

- تحسين الشرح في ملفات README (باللغة العربية أو الإنجليزية).
- تحسين تجربة الاستخدام في واجهة `app.py`.
- إضافة أذكار جاهزة جديدة أو أهداف مفيدة.

---

## ملاحظات

- تجنّب رفع أي معلومات حسّاسة أو مفاتيح سرّية ضمن الشيفرة.
- حاول الالتزام بنمط الشيفرة الحالي في `app.py`.
- إذا عدّلت على التبعيات (الحزم)، حدّث ملف `requirements.txt` واذكر السبب في الـ Pull Request.

---

## الملاحظات والإبلاغ عن المشاكل

- **الأخطاء والاقتراحات**:
  - يمكنك فتح Issue جديد على GitHub:
    [صفحة القضايا على GitHub](https://github.com/Mostafa-Ben-Git/Misbaha/issues)
- **من المفيد ذكر**:
  - نظام التشغيل وإصدار Python.
  - طريقة التشغيل (وضع التطوير أم ملف تنفيذي).
  - خطوات واضحة لإعادة المشكلة، أو وصف مختصر للفكرة/الميزة التي تقترحها.

ملاحظاتك واقتراحاتك تساعد كثيرًا في تحسين مسبحة واستقراره.

